<!DOCTYPE html>
<html>
  <head>
  <title>Joosy API</title>
  <link rel='stylesheet' href='../../../assets/codo.css' type='text/css'>
  <script src='../../../assets/codo.js'></script>
</head>
  <body>
    <div id='header'>
  <div id='menu'>
    <a href='../../../_index.html' title='Index'>Index</a>
    &raquo;
    <span class='title'>Joosy</span>
    &raquo;
    <span class='title'>Resource</span>
    &raquo;
    <span class='title'>Generic</span>
  </div>
  <div id='search'>
    <a id='class_list_link' href='../../../class_list.html'>Class List</a>
    <a id='method_list_link' href='../../../method_list.html'>Method List</a>
    <a id='file_list_link' href='../../../file_list.html'>File List</a>
  </div>
  <iframe id='search_frame'></iframe>
</div>
    <div id='content'>
      <h1>
        Class:
        Joosy.Resource.Generic
      </h1>
      <dl class='box'>
        <dt>Inherits:</dt>
        <dd>
          <a href="../../../classes/Joosy/Module.html">Joosy.Module</a>
        </dd>
        <dt>Defined in:</dt>
        <dd>app/assets/javascripts/joosy/core/resource/generic.js.coffee</dd>
      </dl>
      <h2>Overview</h2>
      <div class='docstring'>
  <p>Basic data wrapper with triggering and entity name binding


</p>

  <div class='examples'>
    <h3>Examples:</h3>
    <h4>
      Basic usage
    </h4>
    <pre><code class='coffee'>class R extends Joosy.Resource.Generic
  @entity &apos;r&apos;

  @beforeLoad (data) -&gt;
    data.real = true

r = R.create {r: {foo: {bar: &apos;baz&apos;}}}

r(&apos;foo&apos;)                  # {baz: &apos;baz&apos;}
r(&apos;real&apos;)                 # true
r(&apos;foo.bar&apos;)              # baz
r(&apos;foo.bar&apos;, &apos;fluffy&apos;)    # triggers &apos;changed&apos;</code></pre>
  </div>
</div>
<div class='tags'>
</div>
      <h2>Direct Known Subclasses</h2>
      <p class='children'>
        <a href="../../../classes/Joosy/Resource/REST.html">Joosy.Resource.REST</a>
      </p>
      <h2>Constant Summary</h2>
      <h3 class='inherited'>
        Constants inherited from
        <a href="../../../classes/Joosy/Module.html">Joosy.Module</a>
      </h3>
      <p class='inherited'>
        <a href="../../../classes/Joosy/Module.html#__namespace__-constant">__namespace__</a>
      </p>
      <h2>Class Method Summary</h2>
      <ul class='summary'>
  <li>
    <span class='signature'>
      <a href='#source-class'>
        + (void) <strong>source</strong>(source)
      </a>
    </span>
    <span class='desc'>
      Sets the data source description (which is NOT required)
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#at-class'>
        + (void) <strong>at</strong>()
      </a>
    </span>
    <span class='desc'>
      Creates the proxy of current resource with proper {::source} value
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#entity-class'>
        + (void) <strong>entity</strong>(name)
      </a>
    </span>
    <span class='desc'>
      Sets the entity text name: required to do some magic like skipping the root node.
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#collection-class'>
        + (void) <strong>collection</strong>(klass)
      </a>
    </span>
    <span class='desc'>
      Sets the collection to use
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#beforeLoad-class'>
        + (void) <strong>beforeLoad</strong>(action)
      </a>
    </span>
    <span class='desc'>
      Allows to modify data before it gets stored.
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#map-class'>
        + (void) <strong>map</strong>(name, klass = false)
      </a>
    </span>
    <span class='desc'>
      Dynamically creates collection of inline resources.
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#create-class'>
        + (Joosy.Resource.Generic) <strong>create</strong>()
      </a>
    </span>
    <span class='desc'>
      Wraps instance of resource inside shim-function allowing to track data changes.
    </span>
  </li>
</ul>
      <h2>Instance Method Summary</h2>
      <ul class='summary'>
  <li>
    <span class='signature'>
      <a href='#__collection-instance'>
        - (void) <strong>__collection</strong>()
      </a>
    </span>
    <span class='desc'>
      Implements {::collection} default behavior.
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#constructor-instance'>
        - (void) <strong>constructor</strong>(data)
      </a>
    </span>
    <span class='constructor note title'>Constructor</span>
    <span class='note private title'>Private</span>
    <span class='desc'>
      Should NOT be called directly, use {::create} instead
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#reset-instance'>
        - (Joosy.Resource.Generic) <strong>reset</strong>(data)
      </a>
    </span>
    <span class='desc'>
      Set the resource data manually
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#get-instance'>
        - (mixed) <strong>get</strong>(path)
      </a>
    </span>
    <span class='desc'>
      Getter for wrapped data
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#set-instance'>
        - (void) <strong>set</strong>(path, value)
      </a>
    </span>
    <span class='desc'>
      Setter for wrapped data, triggers `changed` event.
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#__callTarget-instance'>
        - (Array) <strong>__callTarget</strong>(path)
      </a>
    </span>
    <span class='desc'>
      Locates the actual instance of attribute path `foo.bar` from get/set
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#__call-instance'>
        - (void) <strong>__call</strong>(path, value)
      </a>
    </span>
    <span class='desc'>
      Wrapper for {#create} magic
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#__fillData-instance'>
        - (void) <strong>__fillData</strong>(data, notify = true)
      </a>
    </span>
    <span class='desc'>
      Defines how exactly prepared data should be saved
    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#__prepareData-instance'>
        - (Hash) <strong>__prepareData</strong>(data)
      </a>
    </span>
    <span class='desc'>
      Prepares raw data: cuts the root node if it exists, runs before filters
    </span>
  </li>
</ul>
      <h3 class='inherited'>
        Methods inherited from
        <a href="../../../classes/Joosy/Module.html">Joosy.Module</a>
      </h3>
      <p class='inherited'>
        <a href="../../../classes/Joosy/Module.html#__className-class">.__className</a>
        <a href="../../../classes/Joosy/Module.html#hasAncestor-class">.hasAncestor</a>
        <a href="../../../classes/Joosy/Module.html#merge-class">.merge</a>
        <a href="../../../classes/Joosy/Module.html#include-class">.include</a>
        <a href="../../../classes/Joosy/Module.html#extend-class">.extend</a>
      </p>
      <h2>Class Method Details</h2>
      <div class='methods'>
  <div class='method_details'>
    <p class='signature' id='source-class'>
      + (void) <strong>source</strong>(source)
    </p>
    <div class='docstring'>
  <div class='note'>
    <strong>Note:</strong>
    This has no use in Generic but is required in any descendant
  </div>
  <p>Sets the data source description (which is NOT required)




</p>

  <div class='examples'>
    <h3>Examples:</h3>
    <h4>
      Simple case
    </h4>
    <pre><code class='coffee'>Class Y extends Joosy.Resource.Generic
  @source &apos;fluffies&apos;

r = Y.create {}</code></pre>
    <h4>
      Case with lambda
    </h4>
    <pre><code class='coffee'>class R extends Joosy.Resource.Generic
  @source -&gt; (path) &quot;/&quot;+path

r = R.create {}                 # will raise exception
r = R.at(&apos;foo/bar&apos;).create {}   # will work as expected</code></pre>
  </div>
</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>Source</span>
      <span class='type'>
        (<tt>mixed</tt>)
      </span>
      &mdash;
      <span class='desc'>can be any type including lambda. If lambda is given resource will not expect direct {::create} calls You&apos;ll have to prepare descendant with {::at} first.</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='at-class'>
      + (void) <strong>at</strong>()
    </p>
    <div class='docstring'>
  <div class='note'>
    <strong>Note:</strong>
    Should be used together with lambda source (see {::source} for example)
  </div>
  <p>Creates the proxy of current resource with proper {::source} value


</p>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='entity-class'>
      + (void) <strong>entity</strong>(name)
    </p>
    <div class='docstring'>
  <p>Sets the entity text name: required to do some magic like skipping the root node.


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>name</span>
      <span class='type'>
        (<tt>String</tt>)
      </span>
      &mdash;
      <span class='desc'>Singular name of resource</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='collection-class'>
      + (void) <strong>collection</strong>(klass)
    </p>
    <div class='docstring'>
  <div class='note'>
    <strong>Note:</strong>
    By default will try to seek for `EntityNamesCollection`. Will fallback to {Joosy.Resource.Collection}
  </div>
  <p>Sets the collection to use



</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>klass</span>
      <span class='type'>
        (<tt>Class</tt>)
      </span>
      &mdash;
      <span class='desc'>Class to assign as collection</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='beforeLoad-class'>
      + (void) <strong>beforeLoad</strong>(action)
    </p>
    <div class='docstring'>
  <p>Allows to modify data before it gets stored.
You can define several beforeLoad filters that will be chained.


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>action</span>
      <span class='type'>
        (<tt>Function</tt>)
      </span>
      &mdash;
      <span class='desc'>`(Object) -&gt; Object` to call</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='map-class'>
      + (void) <strong>map</strong>(name, klass = false)
    </p>
    <div class='docstring'>
  <p>Dynamically creates collection of inline resources.

</p>
<p>Inline resources share the instance with direct data and therefore can be used to handle inline changes with triggers and all that resources stuff



</p>

  <div class='examples'>
    <h3>Examples:</h3>
    <h4>
      Basic usage
    </h4>
    <pre><code class='coffee'>class Zombie extends Joosy.Resource.Generic
  @entity &apos;zombie&apos;
class Puppy extends Joosy.Resource.Generic
  @entity &apos;puppy&apos;
  @maps &apos;zombies&apos;

p = Puppy.create {zombies: [{foo: &apos;bar&apos;}]}

p(&apos;zombies&apos;)            # Direct access: [{foo: &apos;bar&apos;}]
p.zombies               # Wrapped Collection of Zombie instances
p.zombies.at(0)(&apos;foo&apos;)  # bar</code></pre>
  </div>
</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>name</span>
      <span class='type'>
        (<tt>String</tt>)
      </span>
      &mdash;
      <span class='desc'>Pluralized name of property to define</span>
    </li>
    <li>
      <span class='name'>klass</span>
      <span class='type'>
        (<tt>Class</tt>)
      </span>
      &mdash;
      <span class='desc'>Resource class to instantiate</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='create-class'>
      + (Joosy.Resource.Generic) <strong>create</strong>()
    </p>
    <div class='docstring'>
  <p>Wraps instance of resource inside shim-function allowing to track
data changes. See class example


</p>

</div>
<div class='tags'>
  <h3>Returns:</h3>
  <ul class='return'>
    <li>
      <span class='type'>
        (<tt><a href='../../../classes/Joosy/Resource/Generic.html'>Joosy.Resource.Generic</a></tt>)
      </span>
      &mdash;
      <span class='desc'></span>
    </li>
  </ul>
</div>
  </div>
</div>
      <h2>Constructor Details</h2>
      <div class='methods'>
  <div class='method_details'>
    <p class='signature' id='constructor-instance'>
      - (void) <strong>constructor</strong>(data)
      (private)
    </p>
    <div class='docstring'>
  <p>Should NOT be called directly, use {::create} instead


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>data</span>
      <span class='type'>
        (<tt>Object</tt>)
      </span>
      &mdash;
      <span class='desc'>Data to store</span>
    </li>
  </ul>
</div>
  </div>
</div>
      <h2>Instance Method Details</h2>
      <div class='methods'>
  <div class='method_details'>
    <p class='signature' id='__collection-instance'>
      - (void) <strong>__collection</strong>()
    </p>
    <div class='docstring'>
  <p>Implements {::collection} default behavior.

</p>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='reset-instance'>
      - (Joosy.Resource.Generic) <strong>reset</strong>(data)
    </p>
    <div class='docstring'>
  <p>Set the resource data manually



</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>data</span>
      <span class='type'>
        (<tt>Object</tt>)
      </span>
      &mdash;
      <span class='desc'>Data to store</span>
    </li>
  </ul>
  <h3>Returns:</h3>
  <ul class='return'>
    <li>
      <span class='type'>
        (<tt><a href='../../../classes/Joosy/Resource/Generic.html'>Joosy.Resource.Generic</a></tt>)
      </span>
      &mdash;
      <span class='desc'>Returns self</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='get-instance'>
      - (mixed) <strong>get</strong>(path)
    </p>
    <div class='docstring'>
  <p>Getter for wrapped data


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>path</span>
      <span class='type'>
        (<tt>String</tt>)
      </span>
      &mdash;
      <span class='desc'>Attribute name to get. Can contain dots to get inline Objects values</span>
    </li>
  </ul>
  <h3>Returns:</h3>
  <ul class='return'>
    <li>
      <span class='type'>
        (<tt>mixed</tt>)
      </span>
      &mdash;
      <span class='desc'></span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='set-instance'>
      - (void) <strong>set</strong>(path, value)
    </p>
    <div class='docstring'>
  <p>Setter for wrapped data, triggers <code>changed</code> event.


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>path</span>
      <span class='type'>
        (<tt>String</tt>)
      </span>
      &mdash;
      <span class='desc'>Attribute name to set. Can contain dots to get inline Objects values</span>
    </li>
    <li>
      <span class='name'>value</span>
      <span class='type'>
        (<tt>mixed</tt>)
      </span>
      &mdash;
      <span class='desc'>Value to set</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='__callTarget-instance'>
      - (Array) <strong>__callTarget</strong>(path)
    </p>
    <div class='docstring'>
  <p>Locates the actual instance of attribute path <code>foo.bar</code> from get/set


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>path</span>
      <span class='type'>
        (<tt>String</tt>)
      </span>
      &mdash;
      <span class='desc'>Path to the attribute (`foo.bar`)</span>
    </li>
  </ul>
  <h3>Returns:</h3>
  <ul class='return'>
    <li>
      <span class='type'>
        (<tt>Array</tt>)
      </span>
      &mdash;
      <span class='desc'>Instance of object containing last step of path and keyword for required field</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='__call-instance'>
      - (void) <strong>__call</strong>(path, value)
    </p>
    <div class='docstring'>
  <p>Wrapper for {#create} magic

</p>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='__fillData-instance'>
      - (void) <strong>__fillData</strong>(data, notify = true)
    </p>
    <div class='docstring'>
  <p>Defines how exactly prepared data should be saved


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>data</span>
      <span class='type'>
        (<tt>Object</tt>)
      </span>
      &mdash;
      <span class='desc'>Raw data to store</span>
    </li>
  </ul>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='__prepareData-instance'>
      - (Hash) <strong>__prepareData</strong>(data)
    </p>
    <div class='docstring'>
  <p>Prepares raw data: cuts the root node if it exists, runs before filters


</p>

</div>
<div class='tags'>
  <h3>Parameters:</h3>
  <ul class='param'>
    <li>
      <span class='name'>data</span>
      <span class='type'>
        (<tt>Hash</tt>)
      </span>
      &mdash;
      <span class='desc'>Raw data to prepare</span>
    </li>
  </ul>
  <h3>Returns:</h3>
  <ul class='return'>
    <li>
      <span class='type'>
        (<tt>Hash</tt>)
      </span>
      &mdash;
      <span class='desc'></span>
    </li>
  </ul>
</div>
  </div>
</div>
    </div>
    <div id='footer'>
  Generated on
  Sun Feb 19 2012 23:36:12 GMT+0700 (ICT)
  by
  <a href='https://github.com/netzpirat/codo' title='CoffeeScript API documentation generator'>codo</a>
  v0.2.1
  (Node.js v0.6.8).
  &#10034;
  <a href='http://twitter.com/#!/netzpirat'>@netzpirat</a>
  &#10034;
  <a href='https://mksoft.ch'>mksoft.ch</a>
</div>
  </body>
</html>